[![Sous](https://circleci.com/gh/fourkitchens/sous-drupal-project.svg?style=svg)](https://app.circleci.com/github/fourkitchens/sous-drupal-project/pipelines)
<br/>
<svg width="538" height="330" viewBox="0 0 538 330" fill="none" xmlns="http://www.w3.org/2000/svg">
  <style>
    :root {
      --sous-logo: #10404f;
      --sous-emulsify: #1a96ca;

      [data-color-mode="dark"] {
        --sous-logo: #fff;
      }
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --sous-logo: #fff;
      }

      [data-color-mode="light"] {
        --sous-logo: #10404f;
      }
    }

    .sous__logo {
      color: var(--sous-logo);
    }

    .sous__emulsify {
      color: var(--sous-emulsify);
    }
  </style>
  <rect width="538" height="330" />
  <path d="M42.0001 235.603H61.2369L65.7982 219.54C72.9376 228.662 87.6131 236 104.47 236C134.019 236 154.248 218.548 154.248 192.767C154.248 163.614 129.855 156.276 108.04 151.12C87.8114 146.361 74.7225 143.782 74.7225 132.677C74.7225 124.942 81.4652 117.406 94.9508 117.406C112.601 117.406 121.724 126.529 128.268 146.361H148.1V99.5576H128.863L124.698 113.837C118.154 104.912 106.453 99.161 90.9845 99.161C65.2032 99.161 42.9916 115.82 42.9916 142.196C42.9916 172.34 68.178 179.876 90.1912 184.834C110.816 189.594 122.517 191.974 122.517 202.286C122.517 211.21 115.179 217.755 101.694 217.755C79.4821 217.755 67.9797 207.046 61.8318 186.817H42.0001V235.603Z" fill="currentColor" class="sous__logo" />
  <path d="M216.289 235.008C245.64 235.008 268.644 214.582 268.644 185.429C268.644 156.276 246.631 136.841 216.487 136.841C187.136 136.841 164.131 157.268 164.131 186.421C164.131 215.573 186.144 235.008 216.289 235.008ZM216.884 220.333C205.381 220.333 200.622 211.21 200.622 186.024C200.622 161.036 204.588 151.517 215.892 151.517C227.394 151.517 232.154 160.639 232.154 185.826C232.154 210.814 228.188 220.333 216.884 220.333Z" fill="currentColor" class="sous__logo" />
  <path d="M319.245 235.008C337.688 235.008 347.406 222.713 352.364 207.839V232.827H396.589V214.78H383.5V157.334H337.093V175.381H349.984V193.957C349.984 205.261 343.241 213.789 335.11 213.789C331.342 213.789 328.566 212.599 326.979 211.012C324.004 208.037 323.013 203.476 323.013 197.725V157.334H276.607V175.381H289.497V200.501C289.497 220.135 297.232 235.008 319.245 235.008Z" fill="currentColor" class="sous__logo" />
  <path d="M407.02 234.612H423.877L427.447 221.721C433.595 228.464 443.511 235.008 459.178 235.008C482.778 235.008 495.47 220.531 495.47 203.476C495.47 183.843 480.2 177.298 460.17 172.142C442.123 167.581 437.363 165.597 437.363 159.45C437.363 154.888 439.941 151.517 447.874 151.517C456.996 151.517 467.904 159.053 475.638 169.365H492.297V137.238H475.242L471.672 148.542C465.326 141.601 456.203 136.841 443.114 136.841C421.498 136.841 408.21 150.922 408.21 167.977C408.21 185.429 419.911 192.569 442.321 198.121C461.161 202.683 465.722 205.261 465.722 212.004C465.722 216.962 462.351 219.936 455.013 219.936C444.502 219.936 433 212.202 423.679 200.501H407.02V234.612Z" fill="currentColor" class="sous__logo" />
  <path d="M288.744 150.564V121.681C235.507 109.383 221.817 3.31594 329.813 37.1344C351.108 15.6138 404.345 23.2992 401.303 55.5805C416.513 55.5805 443.892 97.0851 384.571 109.383V150.564H288.744Z" fill="currentColor" class="sous__logo" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M359.801 258.901C358.555 258.901 357.112 267.559 356.271 272.603C356.008 274.179 355.805 275.402 355.684 275.898C355.064 278.262 352.808 283.439 351.115 283.439C350.156 283.439 349.986 282.145 349.986 280.738C350.211 274.378 352.186 267.849 354.103 261.715C353.99 260.363 351.677 259.126 349.647 259.126C349.49 259.126 349.34 259.13 349.193 259.142C348.656 258.448 347.988 257.944 347.221 257.944C345.994 257.944 344.293 258.232 342.068 258.609C340.611 258.855 338.93 259.14 337.011 259.406C337.225 258.523 337.475 257.57 337.731 256.593L337.732 256.592C338.552 253.46 339.437 250.083 339.437 247.982C339.437 246.012 337.462 245 334.416 245C333.287 245 332.499 245.225 332.499 245.225C332.174 246.779 331.589 249.86 330.968 253.129L330.966 253.136C330.508 255.548 330.03 258.062 329.624 260.14C329.349 260.188 329.089 260.234 328.842 260.277C325.579 260.852 324.755 260.997 324.552 261.432C324.483 261.579 324.486 261.758 324.489 261.999C324.489 262.052 324.49 262.107 324.49 262.165C324.49 263.234 325.28 265.205 326.239 265.936L328.213 267.511C327.998 269.082 327.56 271.097 327.051 273.441C326.758 274.787 326.441 276.242 326.13 277.783C325.425 277.641 324.831 277.698 324.831 277.698C324.663 279.836 323.363 285.522 320.206 285.522C319.361 285.522 318.683 284.621 318.739 282.653C318.796 278.544 321.504 268.357 323.024 263.122C323.702 260.813 317.778 259.97 316.99 259.97C316.483 259.97 315.918 260.082 315.692 260.701C314.282 264.697 311.123 277.248 311.123 282.595C311.123 287.605 313.662 290.024 317.948 290.024C320.621 290.024 322.861 289.028 324.573 287.598C324.393 289.141 324.266 290.624 324.266 291.939C324.266 295.597 325.789 298.186 329.287 298.186C332.785 298.186 341.359 290.87 341.359 279.163C341.359 272.746 339.61 269.426 335.831 265.485L335.889 265.205C339.105 264.736 342.73 264.267 345.739 263.929C344.151 268.801 342.995 274.39 342.995 279.839C342.995 283.159 344.066 287.943 349.2 287.943C351.626 287.943 353.375 286.143 354.276 284.398C354.032 286.458 353.46 289.199 352.932 291.724C352.365 294.441 351.85 296.91 351.85 298.018C351.85 298.919 352.018 299.145 352.582 299.425C353.711 299.931 356.758 301 357.659 301C358.278 301 358.73 300.945 358.9 299.763C359.294 294.415 361.156 282.766 362.228 277.082C362.458 275.616 363.001 273.808 363.593 271.839C364.59 268.517 365.725 264.737 365.725 261.379C365.723 260.14 362.564 258.901 359.801 258.901ZM336.9 280.853C336.674 289.52 332.895 293.404 332.163 293.404C331.485 293.404 331.317 292.502 331.372 291.265C331.423 290.13 331.601 288.734 331.759 287.496C331.781 287.323 331.803 287.153 331.824 286.987C332.344 283.098 332.995 279.229 333.528 276.054C333.922 273.715 334.251 271.753 334.419 270.44C336.674 273.422 337.013 277.53 336.9 280.853Z" fill="currentColor" class="sous__emulsify" />
  <path d="M287.547 245.618C287.208 245.618 286.644 245.674 286.475 246.124C284.365 254.307 281.807 268.67 280.706 278.151C280.59 278.149 280.498 278.149 280.438 278.149C280.438 278.149 279.196 283.664 276.828 283.664C275.079 283.664 274.572 281.188 274.685 279.498C274.757 276.989 275.721 271.465 276.471 267.174L276.471 267.172C276.898 264.727 277.255 262.683 277.337 261.825C277.395 260.869 274.404 259.124 272.316 259.124C271.413 259.124 270.738 259.349 270.68 259.855C269.722 265.483 265.998 277.809 262.277 282.761L261.544 282.536C261.15 276.907 263.348 268.072 265.436 261.6C264.984 260.869 262.954 259.742 260.641 259.742C257.989 259.742 254.493 274.263 254.493 280.848C254.493 281.296 254.558 281.747 254.673 282.193C254.035 283.655 253.037 285.237 251.784 285.237C250.318 285.237 249.641 283.943 249.641 281.241C249.641 277.721 250.783 273.224 251.866 268.962C252.584 266.137 253.275 263.415 253.59 261.149C253.816 259.349 250.263 257.772 247.498 257.772C246.652 257.772 245.694 257.997 245.468 258.448C243.198 262.608 241.591 267.343 240.053 271.878C239.49 273.538 238.936 275.171 238.362 276.739H238.136C238.281 274.056 238.731 270.671 239.138 267.609C239.363 265.92 239.574 264.328 239.714 263.007C239.94 261.319 237.062 259.912 234.131 259.912C233.511 259.912 232.495 260.025 232.27 260.475C231.149 263.001 229.935 266.358 228.629 269.969C227.898 271.993 227.137 274.096 226.348 276.178H226.122C226.225 273.083 227.654 267.154 228.848 262.199L228.851 262.189C228.959 261.741 229.065 261.3 229.168 260.871C229.392 259.972 226.629 258.565 224.373 258.565C222.875 258.565 220.009 270.215 219.534 279.652C215.995 279.611 210.467 280.558 203.276 282.257C203.615 278.319 204.009 274.546 204.573 270.888C207.845 270.382 211.624 269.874 214.838 269.819C215.797 269.819 215.855 269.03 215.855 268.637C215.855 268.187 214.67 266.386 213.654 265.43C213.058 264.886 211.459 264.995 209.279 265.143L209.278 265.143C208.98 265.164 208.671 265.185 208.352 265.205L205.532 265.485C206.152 262.108 206.942 258.73 207.845 255.41C210.947 254.905 213.541 254.509 216.587 254.284C216.587 254.284 216.136 255.353 216.136 256.029C216.078 256.647 217.885 256.535 219.295 255.916C219.972 255.523 223.638 252.989 223.638 252.596C223.638 252.146 222.396 249.557 222.115 249.276C220.833 248.045 218.943 248.279 217.094 248.507C216.83 248.54 216.567 248.572 216.306 248.6C214.783 248.768 212.414 249.051 209.649 249.557L210.043 248.488C208.972 247.644 206.377 247.136 204.403 246.913C203.725 248.095 203.105 249.446 202.486 250.966C199.891 251.585 197.184 252.318 194.757 253.104C193.573 253.498 196.393 257.606 197.916 257.326C198.512 257.221 199.086 257.095 199.638 256.973C199.975 256.899 200.304 256.827 200.624 256.762C199.778 259.914 199.046 263.347 198.368 266.837C196.451 267.343 194.815 267.851 194.195 268.244C193.237 268.92 195.492 272.521 197.354 272.185H197.522C196.903 276.293 196.393 280.347 196.112 284.005L193.066 284.793C191.824 285.131 194.421 289.353 196.281 289.015L196.619 288.902C198.481 289.803 202.599 291.265 202.711 289.971L202.824 287.72C209.771 286.382 215.212 285.492 219.804 285.184C220.509 287.959 222.306 289.52 225.051 289.52C226.461 289.52 227.59 288.619 227.59 288.619C227.703 283.722 230.355 275.788 232.101 271.116H232.553C232.101 275.282 231.763 280.347 231.707 284.681C231.652 288.677 233.062 291.153 236.728 291.153C238.251 291.153 239.323 290.364 239.323 290.364C239.436 285.467 242.088 275.675 244.399 271.003H245.019C244.399 273.705 243.327 279.108 243.27 281.358C243.101 285.918 244.735 289.801 250.152 289.801C253.459 289.801 255.733 288.008 256.977 286.003C258.544 287.587 260.574 288.677 262.224 288.677C265.496 288.677 267.977 282.993 268.881 280.404L269.332 280.459C269.106 283.669 269.897 288.058 275.254 288.058C277.047 288.058 278.683 287.276 280.01 286.168C279.996 286.849 280.042 287.412 280.217 287.72C280.556 288.677 286.252 290.985 287.042 290.028C287.081 289.015 287.168 288.002 287.256 286.989C287.299 286.483 287.343 285.976 287.381 285.469C288.339 273.199 290.708 260.367 293.247 248.492C293.469 247.476 289.238 245.618 287.547 245.618Z" fill="currentColor" class="sous__emulsify" />
  <path d="M306.33 266.95C308.134 266.95 312.365 263.855 312.365 261.715C312.365 260.701 310.335 257.944 309.657 257.944C308.586 257.944 291.722 262.22 291.438 264.586C291.27 266.049 292.284 269.201 293.187 269.989C297.079 270.495 303.001 274.491 303.001 279.894C303.001 283.439 301.365 285.86 298.15 285.86C295.217 285.86 294.427 283.497 294.484 282.991C294.484 282.834 294.787 282.203 295.183 281.377C295.921 279.837 296.986 277.617 297.024 276.519C297.024 276.068 294.936 274.155 292.964 274.155C290.424 274.155 288.733 278.206 288.733 280.853C288.733 285.299 294.655 290.927 300.634 290.927C305.542 290.927 309.886 288.506 309.886 282.034C309.886 272.24 298.378 267.796 298.378 267.796L298.321 267.571C298.828 267.12 302.832 265.488 304.694 265.432C305.06 265.431 305.286 265.81 305.511 266.19C305.737 266.57 305.963 266.95 306.33 266.95Z" fill="currentColor" class="sous__emulsify" />
  <path d="M326.861 250.853C326.861 252.824 325.225 256.482 320.204 256.482C318.964 256.482 316.877 255.355 316.877 252.543C316.877 250.856 317.893 245.621 321.897 245.621C323.872 245.621 325.056 246.014 324.492 247.984C325.676 248.49 326.861 249.166 326.861 250.853Z" fill="currentColor" class="sous__emulsify" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M365.702 286.511H364.218V289.697H365.106V288.73H365.495L366.142 289.697H367.163L366.4 288.589C366.797 288.424 367.055 288.1 367.055 287.612V287.596C367.055 287.29 366.963 287.049 366.781 286.867C366.557 286.644 366.209 286.511 365.702 286.511ZM366.168 287.67C366.168 287.902 365.993 288.042 365.686 288.042H365.108V287.272H365.679C365.977 287.272 366.168 287.396 366.168 287.654V287.67Z" fill="currentColor" class="sous__emulsify" />
  <path fill-rule="evenodd" clip-rule="evenodd" d="M362.534 288.192V288.208C362.534 289.838 363.843 291.203 365.527 291.203C367.212 291.203 368.539 289.822 368.539 288.192V288.175C368.539 286.545 367.23 285.18 365.546 285.18C363.861 285.18 362.534 286.561 362.534 288.192ZM368.191 288.173V288.189C368.191 289.654 367.046 290.872 365.53 290.87C364.02 290.87 362.884 289.67 362.884 288.205V288.189C362.884 286.725 364.027 285.508 365.546 285.508C367.055 285.508 368.191 286.709 368.191 288.173Z" fill="currentColor" class="sous__emulsify" />
  <path d="M42.5986 282.645V264.252H54.7768V267.458H46.4874V271.841H53.9685V275.047H46.4874V282.645H42.5986Z" fill="currentColor" class="sous__logo" />
  <path d="M57.3925 282.645V264.252H69.7862V267.458H61.2812V271.841H69.1485V275.047H61.2812V279.439H69.8221V282.645H57.3925Z" fill="currentColor" class="sous__logo" />
  <path d="M76.0481 282.645H71.881L78.2305 264.252H83.2419L89.5824 282.645H85.4153L80.808 268.455H80.6643L76.0481 282.645ZM75.7877 275.416H85.6308V278.451H75.7877V275.416Z" fill="currentColor" class="sous__logo" />
  <path d="M88.8482 267.458V264.252H103.954V267.458H98.3231V282.645H94.4793V267.458H88.8482Z" fill="currentColor" class="sous__logo" />
  <path d="M117.803 264.252H121.692V276.197C121.692 277.538 121.371 278.712 120.731 279.717C120.096 280.723 119.207 281.508 118.063 282.07C116.92 282.627 115.587 282.906 114.067 282.906C112.54 282.906 111.205 282.627 110.061 282.07C108.918 281.508 108.029 280.723 107.394 279.717C106.759 278.712 106.442 277.538 106.442 276.197V264.252H110.331V275.865C110.331 276.565 110.483 277.188 110.789 277.733C111.1 278.277 111.537 278.706 112.1 279.017C112.663 279.328 113.318 279.484 114.067 279.484C114.821 279.484 115.477 279.328 116.034 279.017C116.596 278.706 117.03 278.277 117.336 277.733C117.647 277.188 117.803 276.565 117.803 275.865V264.252Z" fill="currentColor" class="sous__logo" />
  <path d="M124.891 282.645V264.252H132.148C133.537 264.252 134.722 264.501 135.704 264.998C136.692 265.489 137.443 266.186 137.958 267.09C138.479 267.988 138.74 269.045 138.74 270.26C138.74 271.482 138.476 272.533 137.949 273.413C137.422 274.287 136.659 274.957 135.659 275.424C134.665 275.891 133.462 276.125 132.049 276.125H127.19V273H131.42C132.163 273 132.779 272.898 133.27 272.694C133.761 272.491 134.126 272.185 134.366 271.778C134.611 271.371 134.734 270.865 134.734 270.26C134.734 269.65 134.611 269.135 134.366 268.716C134.126 268.297 133.758 267.979 133.261 267.764C132.77 267.542 132.151 267.431 131.402 267.431H128.78V282.645H124.891ZM134.824 274.275L139.395 282.645H135.102L130.63 274.275H134.824Z" fill="currentColor" class="sous__logo" />
  <path d="M145.376 264.252V282.645H141.488V264.252H145.376Z" fill="currentColor" class="sous__logo" />
  <path d="M163.96 264.252V282.645H160.601L152.599 271.069H152.465V282.645H148.576V264.252H151.989L159.928 275.82H160.09V264.252H163.96Z" fill="currentColor" class="sous__logo" />
  <path d="M179.369 270.198C179.244 269.761 179.067 269.374 178.839 269.039C178.612 268.698 178.334 268.41 178.004 268.177C177.681 267.937 177.31 267.755 176.891 267.629C176.477 267.503 176.019 267.44 175.517 267.44C174.577 267.44 173.75 267.674 173.038 268.141C172.331 268.608 171.78 269.288 171.385 270.18C170.99 271.066 170.793 272.149 170.793 273.431C170.793 274.712 170.987 275.802 171.376 276.7C171.765 277.598 172.316 278.283 173.029 278.756C173.741 279.223 174.583 279.457 175.552 279.457C176.433 279.457 177.184 279.301 177.807 278.99C178.435 278.673 178.914 278.227 179.244 277.652C179.579 277.077 179.747 276.397 179.747 275.613L180.537 275.73H175.795V272.802H183.492V275.119C183.492 276.736 183.15 278.125 182.468 279.286C181.785 280.442 180.845 281.334 179.648 281.963C178.45 282.585 177.079 282.897 175.534 282.897C173.81 282.897 172.295 282.516 170.99 281.756C169.685 280.99 168.667 279.903 167.937 278.496C167.212 277.083 166.85 275.407 166.85 273.467C166.85 271.976 167.065 270.647 167.497 269.479C167.934 268.306 168.544 267.312 169.329 266.497C170.113 265.683 171.026 265.063 172.068 264.638C173.11 264.213 174.238 264.001 175.454 264.001C176.495 264.001 177.465 264.153 178.363 264.459C179.262 264.758 180.058 265.183 180.752 265.734C181.453 266.285 182.025 266.94 182.468 267.701C182.911 268.455 183.195 269.288 183.321 270.198H179.369Z" fill="currentColor" class="sous__logo" />
</svg>


# Sous Project

This will provide you with a starting Drupal project that is managed with Composer. The install will include a small set of contrib modules, a starting custom module for specific for the build, and a custom starting theme generated from Emulsify.

# Installation

## Requirements
Without these you will have difficulty installing this project.

1. [PHP ^7.4](http://www.php.net/)
2. [Node ~12.13.0 || ^16.4 \(we recommend NVM\)](https://github.com/creationix/nvm)
3. [Composer 2.x](https://getcomposer.org/)

Use this command below and replace `PROJECT_NAME` with your chosen project name.

```
composer create-project fourkitchens/sous-drupal-project PROJECT_NAME --no-interaction

```

## Tweak & Install project

- Boot local environment and install `Lando start`

  - Follow URL once environment is booted and proceed with Drupal Install

- Modify .gitignore
  - Remove the commented block at the EOF
  - Review ignored items you may need for your build and remove them

## Working with Emulsify
The [Emulsify](https://emulsify.info/) theme is installed as part of this project.

## Additional Tooling

This package provides some additional tooling to support the build.


### Helper scripts

To use the helper script provided you will need to have `npm` installed. Then just run `npm run <command>`. For example: `npm run import-data`. These commands are bash scripts located in the `./scripts/sous` directory and defined in `package.json`.

#### Configuration management scripts

**confex**

```
yarn confex
```

Export active configuration to the config directory.

**confim**

```
yarn confim
```

Import the configuration to the database.

**import-data**

```
yarn import-data
```

Import a copy of the canonical database backup into your local instance. This assumes the database backup is located in `./reference/db.sql.gz`.

**local-data-bak**

```
yarn local-data-bak
```

Create a local database backup. Saves the backup to the `./reference` directory.

**rebuild**

```
yarn rebuild
```

Rebuild a fresh local instance of your site. Imports the canonical database backup and imports configuration into it.

## Semantic Versioning

## Setup

1. This repo has the following named/maintenance branches:

```
master
x.x
x.x.x
```

2. These branches are protected on GitHub
3. A personal access token was created for CircleCI.
4. CircleCI was setup to run on this project and tag the releases
5. Commit changes following the [Conventional commit guidelines](https://www.conventionalcommits.org/en/v1.0.0/)
6. Push your change up and verify CircleCI passes and has run on your desired branch.

## Troubleshooting

1. Your branch must be a named stable release branch in order to get a tag.
2. Prereleases are not supported with this package because they contain a dot.
